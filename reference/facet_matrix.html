<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Facet by different data columns — facet_matrix • ggforce</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Facet by different data columns — facet_matrix" />
<meta property="og:description" content="The facet_matrix() facet allows you to put different data columns into
different rows and columns in a grid of panels. If the same data columns are
present in both the rows and the columns of the grid, and used together with
ggplot2::geom_point() it is also known as a scatterplot matrix, and if
other geoms are used it is sometimes referred to as a pairs plot.
facet_matrix is so flexible that these types are simply a subset of its
capabilities, as any combination of data columns can be plotted against each
other using any type of geom. Layers should use the .panel_x and .panel_y
placeholders to map aesthetics to, in order to access the row and column
data." />
<meta property="og:image" content="https://ggforce.data-imaginist.com/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggforce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2019/a-flurry-of-facets/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.data-imaginist.com/2019/the-ggforce-awakens-again/">Version 0.2.0</a>
    </li>
    <li>
      <a href="https://www.data-imaginist.com/2016/announcing-ggforce/">Version 0.1.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/thomasp85/ggforce">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Facet by different data columns</h1>
    <small class="dont-index">Source: <a href='https://github.com/thomasp85/ggforce/blob/master/R/facet_matrix.R'><code>R/facet_matrix.R</code></a></small>
    <div class="hidden name"><code>facet_matrix.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>facet_matrix()</code> facet allows you to put different data columns into
different rows and columns in a grid of panels. If the same data columns are
present in both the rows and the columns of the grid, and used together with
<code><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>ggplot2::geom_point()</a></code> it is also known as a scatterplot matrix, and if
other geoms are used it is sometimes referred to as a pairs plot.
<code>facet_matrix</code> is so flexible that these types are simply a subset of its
capabilities, as any combination of data columns can be plotted against each
other using any type of geom. Layers should use the <code>.panel_x</code> and <code>.panel_y</code>
placeholders to map aesthetics to, in order to access the row and column
data.</p>
    </div>

    <pre class="usage"><span class='fu'>facet_matrix</span><span class='op'>(</span>
  <span class='va'>rows</span>,
  cols <span class='op'>=</span> <span class='va'>rows</span>,
  shrink <span class='op'>=</span> <span class='cn'>TRUE</span>,
  switch <span class='op'>=</span> <span class='cn'>NULL</span>,
  flip.rows <span class='op'>=</span> <span class='cn'>FALSE</span>,
  alternate.axes <span class='op'>=</span> <span class='cn'>FALSE</span>,
  layer.lower <span class='op'>=</span> <span class='cn'>NULL</span>,
  layer.diag <span class='op'>=</span> <span class='cn'>NULL</span>,
  layer.upper <span class='op'>=</span> <span class='cn'>NULL</span>,
  layer.continuous <span class='op'>=</span> <span class='cn'>NULL</span>,
  layer.discrete <span class='op'>=</span> <span class='cn'>NULL</span>,
  layer.mixed <span class='op'>=</span> <span class='cn'>NULL</span>,
  grid.y.diag <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>rows, cols</th>
      <td><p>A specification of the data columns to put in the rows and
columns of the facet grid. They are specified using the <code><a href='https://ggplot2.tidyverse.org/reference/vars.html'>ggplot2::vars()</a></code>
function wherein you can use standard tidyselect syntax as known from e.g.
<code><a href='https://dplyr.tidyverse.org/reference/select.html'>dplyr::select()</a></code>. These data values will be made available to the different
layers through the <code>.panel_x</code> and <code>.panel_y</code> variables.</p></td>
    </tr>
    <tr>
      <th>shrink</th>
      <td><p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p></td>
    </tr>
    <tr>
      <th>switch</th>
      <td><p>By default, the labels are displayed on the top and
right of the plot. If <code>"x"</code>, the top labels will be
displayed to the bottom. If <code>"y"</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>"both"</code>.</p></td>
    </tr>
    <tr>
      <th>flip.rows</th>
      <td><p>Should the order of the rows be reversed so that, if the
rows and columns are equal, the diagonal goes from bottom-left to top-right
instead of top-left to bottom-right.</p></td>
    </tr>
    <tr>
      <th>alternate.axes</th>
      <td><p>Should axes be drawn at alternating positions.</p></td>
    </tr>
    <tr>
      <th>layer.lower, layer.diag, layer.upper</th>
      <td><p>Specification for where each layer
should appear. The default (<code>NULL</code>) will allow any layer that has not been
specified directly to appear at that position. Putting e.g. <code>layer.diag = 2</code>
will make the second layer appear on the diagonal as well as remove that
layer from any position that has <code>NULL</code>. Using <code>TRUE</code> will put all layers at
that position, and using <code>FALSE</code> will conversely remove all layers. These
settings will only have an effect if the grid is symmetric.</p></td>
    </tr>
    <tr>
      <th>layer.continuous, layer.discrete, layer.mixed</th>
      <td><p>As above, but instead of
referencing panel positions it references the combination of position scales
in the panel. Continuous panels have both a continuous x and y axis, discrete
panels have both a discrete x and y axis, and mixed panels have one of each.
Unlike the position based specifications above these also have an effect in
non-symmetric grids.</p></td>
    </tr>
    <tr>
      <th>grid.y.diag</th>
      <td><p>Should the y grid be removed from the diagonal? In certain
situations the diagonal are used to plot the distribution of the column data
and will thus not use the y-scale. Removing the y gridlines can indicate
this.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Due to the special nature of this faceting it slightly breaks the
ggplot2 API, in that any positional scale settings are ignored. This is
because each row and column in the grid will potentially have very different
scale types and it is not currently possible to have multiple different scale
specifications in the same plot object.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='geom_autopoint.html'>geom_autopoint</a>, <a href='geom_autodensity.html'>geom_autohistogram</a>, <a href='geom_autodensity.html'>geom_autodensity</a>, and
<a href='position_auto.html'>position_auto</a> for geoms and positions that adapts to different positional
scale types</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Standard use:</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>.panel_x</span>, y <span class='op'>=</span> <span class='va'>.panel_y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span><span class='fu'>vars</span><span class='op'>(</span><span class='va'>displ</span>, <span class='va'>cty</span>, <span class='va'>hwy</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Switch the diagonal, alternate the axes and style strips as axis labels</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>.panel_x</span>, y <span class='op'>=</span> <span class='va'>.panel_y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span><span class='fu'>vars</span><span class='op'>(</span><span class='va'>displ</span>, <span class='va'>cty</span>, <span class='va'>hwy</span><span class='op'>)</span>, flip.rows <span class='op'>=</span> <span class='cn'>TRUE</span>,
               alternate.axes <span class='op'>=</span> <span class='cn'>TRUE</span>, switch <span class='op'>=</span> <span class='st'>'both'</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>strip.background <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
        strip.placement <span class='op'>=</span> <span class='st'>'outside'</span>,
        strip.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Mix discrete and continuous columns. Use geom_autopoint for scale-based jitter</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_autopoint.html'>geom_autopoint</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span><span class='fu'>vars</span><span class='op'>(</span><span class='va'>drv</span><span class='op'>:</span><span class='va'>fl</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Have a special diagonal layer</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_autopoint.html'>geom_autopoint</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_autodensity.html'>geom_autodensity</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span><span class='fu'>vars</span><span class='op'>(</span><span class='va'>drv</span><span class='op'>:</span><span class='va'>fl</span><span class='op'>)</span>, layer.diag <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># \donttest{</span>
<span class='co'># Show continuous panels in upper triangle as contours and rest as binned</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_autopoint.html'>geom_autopoint</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_autodensity.html'>geom_autodensity</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_density2d</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>.panel_x</span>, y <span class='op'>=</span> <span class='va'>.panel_y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_bin2d</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>.panel_x</span>, y <span class='op'>=</span> <span class='va'>.panel_y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span><span class='fu'>vars</span><span class='op'>(</span><span class='va'>drv</span><span class='op'>:</span><span class='va'>fl</span><span class='op'>)</span>, layer.lower <span class='op'>=</span> <span class='fl'>1</span>, layer.diag <span class='op'>=</span> <span class='fl'>2</span>,
               layer.continuous <span class='op'>=</span> <span class='op'>-</span><span class='fl'>4</span>, layer.discrete <span class='op'>=</span> <span class='op'>-</span><span class='fl'>3</span>, layer.mixed <span class='op'>=</span> <span class='op'>-</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-5.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>

<span class='co'># Make asymmetric grid</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>.panel_x</span>, y <span class='op'>=</span> <span class='va'>.panel_y</span>, group <span class='op'>=</span> <span class='va'>.panel_x</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_matrix</span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'>vars</span><span class='op'>(</span><span class='va'>cty</span>, <span class='va'>hwy</span><span class='op'>)</span>, cols <span class='op'>=</span> <span class='fu'>vars</span><span class='op'>(</span><span class='va'>drv</span>, <span class='va'>fl</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='img'><img src='facet_matrix-6.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://data-imaginist.com'>Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


